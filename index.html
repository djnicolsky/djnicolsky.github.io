<!DOCTYPE html>
<html lang="en">
	<head>
		<style>
			#holder { border: 1px dashed #333; width: 300px; height: 30px}
			#holder.hover { border: 1px dashed #333; border-color: #FF0000}
		</style>

		<script src="three/js/libs/dat.gui.min.js"></script>

		<script>

			var ScriptModel = '';
			var ScriptSlider = '';
			var ScriptStream = '';
			var r1=0, r2=0, r3=0;

			function setupPreDefined(str){
				var sn = str.attributes["scenario"].value;
				var ss = str.attributes["slider"].value;
				var sl = str.attributes["stream"].value;
				document.getElementById("MBoxID").value = sn+','+ss+','+sl;

				window.open('explorer.html', '3-D Space', 'left=100, top=100, width=800px,height=600px,resizeable=yes,location=yes,toolbar=yes,menubar=yes,scrollbars=no');
			}
			function setupUserDefined(){
				if((r1>1)||(r2>1)||(r3>1)){
					alert('Error: Duplicate scripts are found.'); return;
  				}
  				if(r1==0){
					alert('Error: Scenario is not found.');	return;
  				}
				document.getElementById("MBoxID").value = 'none';

				window.open('explorer.html', '3-D Space', 'left=100, top=100, width=800px,height=600px,resizeable=yes,location=yes,toolbar=yes,menubar=yes,scrollbars=no');
			}			

			function loading(){
				var holder = document.getElementById('holder'),
    			state = document.getElementById('status');

				if (typeof window.FileReader === 'undefined') {
 			  		state.className = 'fail';
 			  		alert('File API & FileReader is not available')
				} else {
			  		state.className = 'success';
  			  		state.innerHTML = '';
				}
 
				holder.ondragover = function () { this.className = 'hover'; return false; };
				holder.ondragend = function () { this.className = ''; return false; };
				holder.ondrop = function (e) {
  					this.className = '';
  					e.preventDefault();

  					reader1 = new FileReader();
  					reader1.onload = function (event) {ScriptModel = event.target.result;};

  					reader2 = new FileReader();
  					reader2.onload = function (event) {ScriptSlider = event.target.result;};

  					reader3 = new FileReader();
  					reader3.onload = function (event) {ScriptStream = event.target.result;};

  					holder.innerHTML = '';
  					for(var i=0; i<e.dataTransfer.files.length; i++){
  						var file = e.dataTransfer.files[i];

						var type=file.name.split('.');
						if(type[1] == 'model'){
							if (r1==0) reader1.readAsText(file); r1++;}
						if(type[1] == 'slider'){
							if (r2==0) reader2.readAsText(file); r2++;}
						if(type[1] == 'stream'){
							if (r3==0) reader3.readAsText(file); r3++;}
   						holder.innerHTML += file.name + '; ';
  					}
  					if((r1>1)||(r2>1)||(r3>1))
  						holder.innerHTML = 'Error; ';
					return false;
				};
			}
	</script> 
	</head>
	<body onload='loading();'>
   		Select scenario: <br>
   		<button onclick='setupPreDefined(this);' scenario='testing\momentum_1' slider='y' stream='n'>Two Balls</button><br>
   		<button onclick='setupPreDefined(this);' scenario='testing\pendulum' slider='y' stream='n'>Pendulum</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\circle' slider='n' stream='n'>Planets</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\bolid2' slider='n' stream='n'>Asteroid</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\dipole_magnetic' slider='y' stream='y'>Earth Dipole</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\eb' slider='y' stream='y'>E&B Fields</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\electrostatic_1' slider='n' stream='y'>Electrostatic +1 -1</button>
		<button onclick='setupPreDefined(this);' scenario='testing\electrostatic_2' slider='n' stream='y'>Electrostatic +2 -1</button><br>
		<button onclick='setupPreDefined(this);' scenario='testing\magnetostatic_1' slider='n' stream='y'>Single Loop</button>
		<button onclick='setupPreDefined(this);' scenario='testing\magnetostatic_2' slider='n' stream='y'>Torroidal Field</button>
		<button onclick='setupPreDefined(this);' scenario='testing\magnetostatic_3' slider='n' stream='y'>Motion in TF</button><br>


   		<input type="hidden" id="MBoxID">

   		<hr>
   		Drag a script file from your desktop on to the drop zone to start the simulation.
		<div id="holder"></div> <button onclick="setupUserDefined();">Start</button><br>
  		<p id="status">File API &amp; FileReader API not supported</p>


	</body>



</html>